import{f as h,z as y,y as x,D as k,u as T,v as a,r as u,A as E,o as V,c as L,a as s,b as t,w as f,g as e,d as U,n as q}from"./entry.69c0241d.js";const B={class:"text-white flex justify-center pt-40"},C=s("div",{class:"header bg-white dark:bg-gray-900 border-b dark:border-gray-700 text-indigo-900 dark:text-gray-200 p-4 rounded-t"},[s("h1",{class:"text-2xl font-bold text-center"},"Welcome")],-1),I={class:"grid grid-cols-12 gap-2"},M={class:"col-span-12"},N={class:"col-span-12"},z={class:"col-span-12"},F=h({__name:"index",setup(A){var w;const{signIn:b}=y(),_=x(),m=k();T({title:"Login"});const i=a.useToast(),g=u(),n=u(!1),r=E({email:"",password:""}),d=u("/dashboard");(w=m.query)!=null&&w.callbackUrl&&(d.value=m.query.callbackUrl);const v=async()=>{const o=g.value.validator();if(o.clearErrors(),await o.validate(),o.fail()){i.error({message:o.getErrorMessage()}),p();return}try{await b({email:r.email,password:r.password},{callbackUrl:d==null?void 0:d.value})}catch{i.error({message:"Email & Password combination missmatch",lifetime:3e3}),p();return}i.success({message:"Loggin success, youre being redirected",lifetime:1e3}),setTimeout(()=>{_.push("/")},1e3)},p=()=>{n.value=!0,setTimeout(()=>{n.value=!1},1250)};return(o,l)=>(V(),L("div",B,[s("div",{class:q(["text-gray-800 rounded-t-lg w-96 shadow-lg p-1 bg-gradient-to-b from-indigo-400 h-20",{"tw-shake":e(n)}])},[C,t(e(a.TwForm),{ref_key:"formLogin",ref:g,name:"login",rules:{email:["required","email"],password:["required"]},onSubmit:v,class:"body bg-white dark:bg-gray-900 p-4 rounded-b-lg"},{default:f(()=>[s("div",I,[s("div",M,[t(e(a.TwInput),{class:"dark:text-gray-200",modelValue:e(r).email,"onUpdate:modelValue":l[0]||(l[0]=c=>e(r).email=c),name:"email",label:"Email"},null,8,["modelValue"]),t(e(a.TwErrorMessage),{name:"email"})]),s("div",N,[t(e(a.TwInput),{class:"dark:text-gray-200",modelValue:e(r).password,"onUpdate:modelValue":l[1]||(l[1]=c=>e(r).password=c),name:"password",label:"Password",type:"password"},null,8,["modelValue"]),t(e(a.TwErrorMessage),{name:"password"})]),s("div",z,[t(e(a.TwButton),{class:"w-full text-center"},{default:f(()=>[U(" Login ")]),_:1})])])]),_:1},512)],2)]))}});export{F as default};
