import{_ as A}from"./ErrorMessage.vue.991cbd67.js";import{f as y,v as s,y as v,z as w,A as G,r as k,j as h,o as H,c as x,a as i,b as o,w as p,g as t,k as I,d as b,n as X,x as U}from"./entry.69c0241d.js";const $=i("h2",{class:"text-2xl font-bold"},"Tambah Donasi",-1),j=i("hr",{class:"my-2 border dark:border-gray-700"},null,-1),D={class:"col-span-12"},C={class:"col-span-6"},F={class:"col-span-6"},P={class:"col-span-12"},q={class:"col-span-12"},B={class:"col-span-12 flex justify-end gap-1"},J=y({__name:"tambah",setup(R){const f=s.useForm(),N=s.useDialog(),m=s.useToast(),T=v(),{$api:_}=U(),{token:g}=w(),n=G({name:"",short_description:"",description:"",goal_amount:0}),d=k(""),E=h(()=>f.getForm("tambah-donasi")),u=h(()=>E.value.validator);function M(){n.name="",n.short_description="",n.description="",n.goal_amount=0,d.value="",u.value.clearErrors()}const c=k(!1),L={campaign_image:["required"],name:["required","string",e=>{if(!e||e.length<10)return"Panjang karakter tidak boleh kurang dari 10"},e=>{if(!e||e.length>200)return"Panjang karakter tidak boleh lebih dari 200"}],short_description:["required","string",e=>{if(!e||e.length<20)return"Panjang karakter tidak boleh kurang dari 20"},e=>{if(!e||e.length>500)return"Panjang karakter tidak boleh lebih dari 500"}],description:["required","string",e=>{if(!e||e.length<100)return"Panjang karakter tidak boleh kurang dari 100"},e=>{if(!e||e.length>1e3)return"Panjang karakter tidak boleh lebih dari 1000"}],goal_amount:["required","number",e=>{if(!e||e<1e5)return"Nominal tidak boleh kurang dari 100000"},e=>{if(!e||e>1e9)return"Nominal tidak boleh lebih dari 1000000000"}]};async function V(){if(await N.fire({title:"Apakah anda sudah yakin ?",description:"Aksi ini tidak dapat diulang kembali !"})){u.value.clearErrors(),await u.value.validate(),u.value.fail()&&(m.error({message:u.value.getErrorMessage()}),c.value=!0,setTimeout(()=>{c.value=!1},1e3));try{const a=await _.campaign.create(g.value,n);if(a!=null&&a.id){let l=new FormData;l.append("file",d.value[0]),console.log(l),await _.campaign.upload(g.value,"5",l),m.success({message:"Donasi berhasil ditambahkan"}),T.push("/donasi")}}catch(a){m.error({message:a==null?void 0:a.message})}}}return(e,a)=>{const l=A;return H(),x("div",null,[$,j,i("div",null,[o(t(s.TwForm),{name:"tambah-donasi",class:X(["grid grid-cols-12 gap-2 bg-white dark:bg-gray-900 dark:border dark:border-gray-700 rounded-lg p-2 shadow",{"tw-shake":t(c)}]),rules:L,onSubmit:V},{default:p(()=>[i("div",D,[o(t(s.TwFile),{modelValue:t(d),"onUpdate:modelValue":a[0]||(a[0]=r=>I(d)?d.value=r:null)},null,8,["modelValue"])]),i("div",C,[o(t(s.TwInput),{label:"Nama",name:"name",modelValue:t(n).name,"onUpdate:modelValue":a[1]||(a[1]=r=>t(n).name=r),placeholder:"Masukan nama kampanye donasi anda",type:"text"},null,8,["modelValue"]),o(l,{name:"name"})]),i("div",F,[o(t(s.TwInput),{label:"Jumlah Donasi yang Dibutuhkan",name:"goal_amount",modelValue:t(n).goal_amount,"onUpdate:modelValue":a[2]||(a[2]=r=>t(n).goal_amount=r),placeholder:"Masukan nominal jumlah donasi",type:"text"},null,8,["modelValue"]),o(l,{name:"goal_amount"})]),i("div",P,[o(t(s.TwInput),{label:"Deskripsi Singkat",name:"short_description",modelValue:t(n).short_description,"onUpdate:modelValue":a[3]||(a[3]=r=>t(n).short_description=r),placeholder:"Masukan deskripsi singkat kampanye donasi",type:"text"},null,8,["modelValue"]),o(l,{name:"short_description"})]),i("div",q,[o(t(s.TwTextarea),{label:"Deskripsi",name:"description",modelValue:t(n).description,"onUpdate:modelValue":a[4]||(a[4]=r=>t(n).description=r),placeholder:"Masukan deskripsi kampanye donasi",type:"text"},null,8,["modelValue"]),o(l,{name:"description"})]),i("div",B,[o(t(s.TwButton),{ripple:"",variant:"secondary",type:"button",class:"px-4 dark:text-gray-200 dark:!border-gray-800 dark:border",onClick:M},{default:p(()=>[b(" Reset ")]),_:1}),o(t(s.TwButton),{variant:"primary",class:"px-4"},{default:p(()=>[b(" Submit ")]),_:1})])]),_:1},8,["class"])])])}}});export{J as default};
